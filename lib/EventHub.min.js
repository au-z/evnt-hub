!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("EventHub",[],n):"object"==typeof exports?exports.EventHub=n():e.EventHub=n()}(window,function(){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);var o=function(e){return e===Object(e)&&"[object Array]"!==Object.prototype.toString.call(e)};n.default=function(e){var n=(e=e||{}).targetOrigin||null,t=e.targetWindow||null,r=e.verbose||!1,i=e.hubId||null;!n&&r&&console.warn("[EventHub] Cannot postMessage without a targetOrigin. Please add it to '_init_' event payload."),e.originRegex||console.warn("[EventHub] No originRegex provided. Incoming messages will not be checked.");var u=function(){},a=function(e){var n={},t=-1;return{subscribe:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};n[e]||(n[e]=[]);var i=(++t).toString();return n[e].push({token:i,func:o}),r&&console.log("Subscription to '".concat(e,"' added. Returning token: ").concat(i,".")),i},publish:function(e,t){return r&&console.log("Event ".concat(e," published. Payload: "),t),!!n[e]&&(setTimeout(function(){for(var o=n[e],r=o?o.length:0;r--;)o[r].func(e,t);u()},0),!0)},unsubscribe:function(e){for(var t in n)if(n[t])for(var o=0;o<n[t].length;o++)if(n[t][o].token===e)return n[t].splice(o,1),e;return!1}}}();function c(n){return!e.originRegex||!!e.originRegex.exec(n)}function s(e){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;a=a||t,r&&console.log("Attempting to postMessage ".concat(e," to targetOrigin ").concat(n,". Payload: "),u),a?(i||console.warn("[EventHub] has no hubId."),o&&(u._hubId=i),n&&a.postMessage({_type:e,payload:u},n)):console.error("[EventHub] cannot postMessage to falsy window.")}return a.subscribe("_init_",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(t)?(i=t.hubId.toString(),(n=t.targetOrigin?t.targetOrigin:n)||console.error("[EventHub] No target origin supplied. Cannot postMessage.")):i=t.toString()}),window.addEventListener("message",function(e){var n=e.origin||e.originalEvent.origin;c(n)?e.data&&e.data._type&&e.data.payload&&(r&&console.log("PostMessage event ".concat(e.data._type," received from ").concat(n,". Publishing.")),a.publish(e.data._type,e.data.payload)):console.warn("[EventHub] message received from unknown origin. Ignoring.")}),{about:function(){return{hubId:i,originRegex:e.originRegex,targetOrigin:n,targetWindow:t,verbose:r,version:"1.3.1"}},emit:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;a.publish(e,n),s(e,n,t)},isOriginValid:c,nextTick:function(e){u=e},post:s,publish:a.publish,subscribe:a.subscribe,unsubscribe:a.unsubscribe}}}])});
//# sourceMappingURL=EventHub.min.js.map