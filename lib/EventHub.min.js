!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("EventHub",[],e):"object"==typeof exports?exports.EventHub=e():n.EventHub=e()}(this,function(){return function(n){function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var t={};return e.m=n,e.c=t,e.i=function(n){return n},e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:r})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=0)}([function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n){function e(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.publish(n,e),t(n,e)}function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.parent&&(o||console.warn("[EventHub] no hubId provided."),t._hubId=o,window.parent.postMessage({_type:e,payload:t},n.targetOrigin))}function r(n){i=n}n=n||{},n.targetOrigin||console.error("[EventHub] targetOrigin not provided.");var o=null,i=function(){},u=function(n){function e(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};o[n]||(o[n]=[]);var t=(++u).toString();return o[n].push({token:t,func:e}),t}function t(n,e){return!!o[n]&&(setTimeout(function(){for(var t=o[n],r=t?t.length:0;r--;)t[r].func(n,e);i()},0),!0)}function r(n){for(var e in o)if(o[e])for(var t=0;t<o[e].length;t++)if(o[e][t].token===n)return o[e].splice(t,1),n;return!1}var o={},u=-1;return{subscribe:e,publish:t,unsubscribe:r}}();return u.subscribe("_init_",function(n,e){o=e.toString()}),window.addEventListener("message",function(e){if((e.origin||e.originalEvent.origin)!==n.targetOrigin)return void console.warn("[EventHub] message received from unknown origin. Ignoring.");e.data&&e.data._type&&e.data.payload||console.error("[EventHub] No type or payload sent with message data"),u.publish(e.data._type,e.data.payload)}),{version:"1.0.0",emit:e,nextTick:r,publish:u.publish,subscribe:u.subscribe,unsubscribe:u.unsubscribe}},n.exports=e.default}])});