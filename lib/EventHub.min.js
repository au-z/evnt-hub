!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("EventHub",[],e):"object"==typeof exports?exports.EventHub=e():n.EventHub=e()}(this,function(){return function(n){function e(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var t={};return e.m=n,e.c=t,e.i=function(n){return n},e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:o})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=0)}([function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};e.default=function(n){function e(e){return!!n.originRegex.exec(e)}function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments[2];f.publish(n,e),r(n,e,t)}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],i=(void 0===t?"undefined":o(t))===Object;r=r||u,r?(c||console.warn("[EventHub] has no hubId."),i&&(t._hubId=c),r.postMessage({_type:e,payload:t},n.targetOrigin)):console.error("[EventHub] cannot postMessage to falsy window.")}function i(n){s=n}n=n||{},n.targetOrigin||console.error("[EventHub] targetOrigin not provided."),n.originRegex||console.error("[EventHub] originRegex not provided.");var u=n.targetWindow||null,c=n.hubId||null,s=function(){},f=function(n){function e(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};r[n]||(r[n]=[]);var t=(++i).toString();return r[n].push({token:t,func:e}),t}function t(n,e){return!!r[n]&&(setTimeout(function(){for(var t=r[n],o=t?t.length:0;o--;)t[o].func(n,e);s()},0),!0)}function o(n){for(var e in r)if(r[e])for(var t=0;t<r[e].length;t++)if(r[e][t].token===n)return r[e].splice(t,1),n;return!1}var r={},i=-1;return{subscribe:e,publish:t,unsubscribe:o}}();return f.subscribe("_init_",function(n,e){c=e.toString()}),window.addEventListener("message",function(n){if(!e(n.origin||n.originalEvent.origin))return void console.warn("[EventHub] message received from unknown origin. Ignoring.");n.data&&n.data._type&&n.data.payload&&f.publish(n.data._type,n.data.payload)}),{version:"1.1.0",emit:t,nextTick:i,isOriginValid:e,publish:f.publish,subscribe:f.subscribe,unsubscribe:f.unsubscribe}},n.exports=e.default}])});