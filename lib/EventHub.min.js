!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("EventHub",[],e):"object"==typeof exports?exports.EventHub=e():n.EventHub=e()}(this,function(){return function(n){function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var t={};return e.m=n,e.c=t,e.i=function(n){return n},e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:r})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=0)}([function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n){function e(e){return!!n.originRegex.exec(e)}function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.publish(n,e),r(n,e)}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.parent&&(i||console.warn("[EventHub] no hubId provided."),t._hubId=i,window.parent.postMessage({_type:e,payload:t},n.targetOrigin))}function o(n){u=n}n=n||{},n.targetOrigin||console.error("[EventHub] targetOrigin not provided."),n.originRegex||console.error("[EventHub] originRegex not provided.");var i=null,u=function(){},a=function(n){function e(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};o[n]||(o[n]=[]);var t=(++i).toString();return o[n].push({token:t,func:e}),t}function t(n,e){return!!o[n]&&(setTimeout(function(){for(var t=o[n],r=t?t.length:0;r--;)t[r].func(n,e);u()},0),!0)}function r(n){for(var e in o)if(o[e])for(var t=0;t<o[e].length;t++)if(o[e][t].token===n)return o[e].splice(t,1),n;return!1}var o={},i=-1;return{subscribe:e,publish:t,unsubscribe:r}}();return a.subscribe("_init_",function(n,e){i=e.toString()}),window.addEventListener("message",function(n){if(!e(n.origin||n.originalEvent.origin))return void console.warn("[EventHub] message received from unknown origin. Ignoring.");n.data&&n.data._type&&n.data.payload||console.error("[EventHub] No type or payload sent with message data"),a.publish(n.data._type,n.data.payload)}),{version:"1.0.3",emit:t,nextTick:o,isOriginValid:e,publish:a.publish,subscribe:a.subscribe,unsubscribe:a.unsubscribe}},n.exports=e.default}])});